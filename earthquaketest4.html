<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.5.2/animate.min.css">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
          height: 50%;
          width: 50%;
          float: right;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      </style>
    </head>
    <body>
      <div id="map" class="animated shake"></div>
      <script>
        var map;
        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            zoom: 6,
            center: {lat: 40.7608, lng: -111.8910},
            mapTypeId: 'terrain'
          });
  
          // Create a <script> tag and set the USGS URL as the source.
          var script = document.createElement('script');

        
          
          var queryURL = "https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=2013-01-01&endtime=&latitude=40.1652&longitude=-111.6108&maxradiuskm=100"

          $.ajax({
					url: queryURL,
					method: "GET"
				}).then(function (response) {
                    eqfeed_callback(response);
                    console.log(response);
                })
          // This example uses a local copy of the GeoJSON stored at
           //http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
         // script.src = 'fakedata.js';
          document.getElementsByTagName('head')[0].appendChild(script);
  
          map.data.setStyle(function(feature) {
            var magnitude = feature.getProperty('mag');
            return {
              icon: getCircle(magnitude)
            };
          });
        }
  
        function getCircle(magnitude) {
          return {
            path: google.maps.SymbolPath.CIRCLE,
            fillColor: 'red',
            fillOpacity: .2,
            scale: Math.pow(2, magnitude) / 2,
            strokeColor: 'white',
            strokeWeight: .5
          };
        }
  
        function eqfeed_callback(results) {
          map.data.addGeoJson(results);
        }

  //      window.eqfeed_callback = function(results) {
   //     for (var i = 0; i < results.features.length; i++) {
   //       var coords = results.features[i].geometry.coordinates;
   //       var latLng = new google.maps.LatLng(coords[1],coords[0]);
   //       var marker = new google.maps.Marker({
   //         position: latLng,
   //         map: map
   //       });
    //    }
  //    }
      </script>
      <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBacf-yGvhzUPn4NA8QQrUHcX_4FG5yNM&content_copy&callback=initMap">
      </script>
<body>

    <div class="container">

        <!-- Jumbotron -->
        <div class="jumbotron">
            <h1 class="text center">Earthquake Module</h1>
            <h3 class="text-center">Group Project 1</h3>
        </div>

        <div class="row">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <strong>Add Address</strong>
                    </h3>
                </div>
                <div class="panel-body">

                    <form>
                        <div class="form-group">
                            <label for="train-name-input">Street Address</label>
                            <input class="form-control" id="train-name-input" type="text">
                        </div>
                        <div class="form-group">
                            <label for="destination-input">City</label>
                            <input class="form-control" id="destination-input" type="text">
                        </div>
                        <div class="form-group">
                            <label for="first-train-input">State</label>
                            <input class="form-control" id="first-train-input" type="text">
                        </div>
                        <button class="btn btn-primary" id="add-train-btn" type="submit">Submit</button>
                    </form>

                </div>

            </div>

        </div>

    </div>
    <div class="col-lg-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <strong>Current Train Schedule</strong>
                </h3>
            </div>
            <div class="panel-body">
                <table class="table table-hover" id='train-table'>
                    <thead>
                        <tr>
                            <th>Train Name</th>
                            <th>Destination</th>
                            <th>Frequency (min)</th>
                            <th>Next Arrival</th>
                            <th>Minutes Away</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</body>

</html>